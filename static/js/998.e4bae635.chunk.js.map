{"version":3,"file":"static/js/998.e4bae635.chunk.js","mappings":"kOACA,EAA4B,0BAA5B,EAAmE,2B,SCItDA,EAAS,WACpB,IAMIC,EANJC,GAAsCC,EAAAA,EAAAA,UAAS,GAAEC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA1CI,EAAWF,EAAA,GAAEG,EAAcH,EAAA,GAClCI,GAA4BL,EAAAA,EAAAA,UAAS,IAAGM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAAjCE,EAAMD,EAAA,GAAEE,EAASF,EAAA,GAExBG,GAAwCT,EAAAA,EAAAA,UAAS,GAAEU,GAAAR,EAAAA,EAAAA,GAAAO,EAAA,GAA9BE,GAAFD,EAAA,GAAiBA,EAAA,IACpCE,GAAoCZ,EAAAA,EAAAA,UAAS,GAAEa,GAAAX,EAAAA,EAAAA,GAAAU,EAAA,GAAxCE,EAAUD,EAAA,GAAEE,EAAaF,EAAA,GAC1BG,GAAWC,EAAAA,EAAAA,OAGjBC,EAAAA,EAAAA,YAAU,WACR,IACMC,EADe,IAAIC,gBAAgBJ,EAASK,QACvBC,IAAI,SAE/B,GAAIH,EAAO,CACT,IACMI,EAAM,qDAAAC,OADG,mCAC2D,WAAAA,OAAUL,EAAK,UAAAK,OAASrB,GAGlGL,EAAc2B,EAAAA,EAAAA,YAAAA,SAEdA,EAAAA,EAAAA,IACOF,EAAQ,CAAEzB,YAAaA,EAAY4B,QACvCC,MAAK,SAAAC,GACJpB,EAAUoB,EAASC,KAAKC,SACxBnB,EAAgBiB,EAASC,KAAKE,eAC9BhB,EAAca,EAASC,KAAKG,YAC9B,IACCC,OAAM,SAAAC,GACDT,EAAAA,EAAAA,SAAeS,GACjBC,QAAQC,IAAI,mBAAoBF,EAAMG,SAEjCvC,GACHqC,QAAQD,MAAM,8BAA+BA,EAEnD,GACJ,CACF,GAAG,CAAClB,EAASK,OAAQlB,IAcrB,OACEmC,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAcC,SAAA,EAC5BC,EAAAA,EAAAA,KAAA,MAAAD,SACGlC,EAAOoC,KAAI,SAAAC,GAAK,OACfF,EAAAA,EAAAA,KAAA,MAAAD,UACEC,EAAAA,EAAAA,KAACG,EAAAA,GAAI,CAACC,GAAE,UAAAtB,OAAYoB,EAAMG,IAAKN,SAAEG,EAAMI,SADhCJ,EAAMG,GAEV,OAITT,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAeC,SAAA,EAC7BC,EAAAA,EAAAA,KAAA,UAAQO,QAjBG,WACX9C,EAAc,GAChBC,EAAeD,EAAc,EAEjC,EAaiC+C,SAA0B,IAAhB/C,EAAkBsC,SAAC,cAGxDH,EAAAA,EAAAA,MAAA,QAAAG,SAAA,CAAM,QAAMtC,MACZuC,EAAAA,EAAAA,KAAA,UAAQO,QA3BG,WACX9C,EAAcW,GAChBV,EAAeD,EAAc,EAEjC,EAuBiC+C,SAAU/C,IAAgBW,EAAW2B,SAAC,cAMzE,C","sources":["webpack://goit-react-hw-05-movies/./src/components/Search/Search.module.scss?94fa","components/Search/Search.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Search_container__FpDfx\",\"pagination\":\"Search_pagination__nAzU5\"};","import { useEffect, useState } from 'react';\nimport { useLocation, Link } from 'react-router-dom';\nimport axios from 'axios';\nimport css from './Search.module.scss';\n\nexport const Search = () => {\n  const [currentPage, setCurrentPage] = useState(1);\n  const [movies, setMovies] = useState([]);\n  // eslint-disable-next-line\n  const [totalResults, setTotalResults] = useState(0);\n  const [totalPages, setTotalPages] = useState(0);\n  const location = useLocation();\n  let cancelToken;\n\n  useEffect(() => {\n    const searchParams = new URLSearchParams(location.search);\n    const query = searchParams.get('query');\n\n    if (query) {\n      const apiKey = 'd8ea0ad05a6720116583e1a3262a0452';\n      const apiUrl = `https://api.themoviedb.org/3/search/movie?api_key=${apiKey}&query=${query}&page=${currentPage}`;\n\n      // eslint-disable-next-line\n      cancelToken = axios.CancelToken.source();\n\n      axios\n        .get(apiUrl, { cancelToken: cancelToken.token })\n        .then(response => {\n          setMovies(response.data.results);\n          setTotalResults(response.data.total_results);\n          setTotalPages(response.data.total_pages);\n        })\n        .catch(error => {\n          if (axios.isCancel(error)) {\n            console.log('Request canceled', error.message);\n          } else {\n            if (!cancelToken)\n              console.error('Error searching for movies:', error);\n          }\n        });\n    }\n  }, [location.search, currentPage]);\n\n  const nextPage = () => {\n    if (currentPage < totalPages) {\n      setCurrentPage(currentPage + 1);\n    }\n  };\n\n  const prevPage = () => {\n    if (currentPage > 1) {\n      setCurrentPage(currentPage - 1);\n    }\n  };\n\n  return (\n    <div className={css.container}>\n      <ul>\n        {movies.map(movie => (\n          <li key={movie.id}>\n            <Link to={`/movie/${movie.id}`}>{movie.title}</Link>\n          </li>\n        ))}\n      </ul>\n\n      <div className={css.pagination}>\n        <button onClick={prevPage} disabled={currentPage === 1}>\n          Previous\n        </button>\n        <span>Page {currentPage}</span>\n        <button onClick={nextPage} disabled={currentPage === totalPages}>\n          Next\n        </button>\n      </div>\n    </div>\n  );\n};\n"],"names":["Search","cancelToken","_useState","useState","_useState2","_slicedToArray","currentPage","setCurrentPage","_useState3","_useState4","movies","setMovies","_useState5","_useState6","setTotalResults","_useState7","_useState8","totalPages","setTotalPages","location","useLocation","useEffect","query","URLSearchParams","search","get","apiUrl","concat","axios","token","then","response","data","results","total_results","total_pages","catch","error","console","log","message","_jsxs","className","css","children","_jsx","map","movie","Link","to","id","title","onClick","disabled"],"sourceRoot":""}